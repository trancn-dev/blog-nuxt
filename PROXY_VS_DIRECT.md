# Hiá»ƒu vá» Proxy Mode vs Direct Mode

## ğŸ” Táº¡i sao Network tab chá»‰ hiá»ƒn thá»‹ `localhost:3000/api/posts/d`?

### Proxy Mode (useAPI() hoáº·c useAPI(false)) - HIá»†N Táº I

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BROWSER                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Network Tab (Chrome DevTools)                           â”‚  â”‚
â”‚  â”‚  âœ… XHR: http://localhost:3000/api/posts/d              â”‚  â”‚
â”‚  â”‚      Status: 200                                         â”‚  â”‚
â”‚  â”‚      Response: {...post data...}                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ (HTTP Request)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    NUXT SERVER (localhost:3000)                 â”‚
â”‚  ğŸ“ server/api/posts/[slug].get.ts                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ defineEventHandler(async (event) => {                    â”‚  â”‚
â”‚  â”‚   const slug = getRouterParam(event, 'slug')            â”‚  â”‚
â”‚  â”‚   console.log('ğŸ”µ Calling Laravel:', slug)              â”‚  â”‚
â”‚  â”‚   const response = await $fetch(                         â”‚  â”‚
â”‚  â”‚     'http://localhost:8000/api/v1/posts/d'              â”‚  â”‚
â”‚  â”‚   )                                                       â”‚  â”‚
â”‚  â”‚   return response                                         â”‚  â”‚
â”‚  â”‚ })                                                        â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ (Server-side fetch)
                              â†“ âš ï¸ KHÃ”NG hiá»ƒn thá»‹ trong browser Network tab
                              â†“    vÃ¬ nÃ³ xáº£y ra á»Ÿ SERVER!
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LARAVEL API (localhost:8000)                   â”‚
â”‚  ğŸ“ routes/api.php                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Route::get('/posts/{slug}', [PostController::class])    â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ Return: {                                                 â”‚  â”‚
â”‚  â”‚   id: 1,                                                  â”‚  â”‚
â”‚  â”‚   title: "My Post",                                       â”‚  â”‚
â”‚  â”‚   content: "..."                                          â”‚  â”‚
â”‚  â”‚ }                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Direct Mode (useAPI(true))

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BROWSER                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Network Tab (Chrome DevTools)                           â”‚  â”‚
â”‚  â”‚  âœ… XHR: http://localhost:8000/api/v1/posts/d           â”‚  â”‚
â”‚  â”‚      Status: 200                                         â”‚  â”‚
â”‚  â”‚      Response: {...post data...}                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“ (HTTP Request - trá»±c tiáº¿p)
                              â†“
                              â†“ (Bá» qua Nuxt Server)
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LARAVEL API (localhost:8000)                   â”‚
â”‚  ğŸ“ routes/api.php                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Route::get('/posts/{slug}', [PostController::class])    â”‚  â”‚
â”‚  â”‚                                                           â”‚  â”‚
â”‚  â”‚ Return: {                                                 â”‚  â”‚
â”‚  â”‚   id: 1,                                                  â”‚  â”‚
â”‚  â”‚   title: "My Post",                                       â”‚  â”‚
â”‚  â”‚   content: "..."                                          â”‚  â”‚
â”‚  â”‚ }                                                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š So sÃ¡nh

| Äiá»ƒm              | Proxy Mode                     | Direct Mode                     |
| ----------------- | ------------------------------ | ------------------------------- |
| URL trong Network | `localhost:3000/api/posts/d`   | `localhost:8000/api/v1/posts/d` |
| Sá»‘ requests       | 1 (client â†’ nuxt)              | 1 (client â†’ laravel)            |
| Backend requests  | 1 (nuxt â†’ laravel, khÃ´ng tháº¥y) | 0                               |
| Tá»•ng HTTP calls   | 2 (nhÆ°ng chá»‰ tháº¥y 1)           | 1                               |
| Báº£o máº­t           | âœ… Cao (áº©n Laravel URL)         | âŒ Tháº¥p (expose Laravel URL)     |
| CORS              | âœ… KhÃ´ng cáº§n config             | âŒ Pháº£i config CORS              |
| SSR               | âœ… Hoáº¡t Ä‘á»™ng tá»‘t                | âš ï¸ CÃ³ thá»ƒ cÃ³ váº¥n Ä‘á»              |

---

## ğŸ” CÃ¡ch kiá»ƒm tra Nuxt Server Ä‘ang gá»i Laravel

### 1. Xem terminal Nuxt dev server:
```bash
npm run dev

# Khi load page, báº¡n sáº½ tháº¥y:
ğŸ”µ [Nuxt Server] Fetching post with slug: d
ğŸ”µ [Nuxt Server] Calling Laravel API: http://localhost:8000/api/v1/posts/d
âœ… [Nuxt Server] Got response from Laravel
```

### 2. Xem Laravel logs:
```bash
# Trong terminal Laravel
php artisan serve --port=8000

# Báº¡n sáº½ tháº¥y:
[2025-11-05 10:30:45] local.INFO: GET /api/v1/posts/d
```

### 3. Kiá»ƒm tra báº±ng code:
ThÃªm log vÃ o Laravel Controller Ä‘á»ƒ cháº¯c cháº¯n:

```php
// devkit/app/Http/Controllers/PostController.php
public function show($slug)
{
    Log::info('ğŸ”´ [Laravel] Received request for post: ' . $slug);
    // ... rest of code
}
```

---

## âœ… Káº¾T LUáº¬N

**Network tab hiá»ƒn thá»‹ `localhost:3000/api/posts/d` lÃ  ÄÃšNG vÃ  MONG Äá»¢I!**

- Browser chá»‰ biáº¿t Ä‘áº¿n Nuxt server
- Nuxt server lÃ  proxy, gá»i Ä‘áº¿n Laravel á»Ÿ phÃ­a backend
- Request tá»« Nuxt â†’ Laravel xáº£y ra server-side, khÃ´ng hiá»ƒn thá»‹ trong browser DevTools

**Náº¿u muá»‘n tháº¥y Laravel URL trong Network tab**, dÃ¹ng:
```typescript
const { postsAPI } = useAPI(true)  // Direct mode
```

**Náº¿u muá»‘n báº£o máº­t vÃ  best practice**, giá»¯ nguyÃªn:
```typescript
const { postsAPI } = useAPI()  // Proxy mode (recommended)
```
